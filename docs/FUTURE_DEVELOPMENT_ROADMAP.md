# 未來開發路線圖

> 最後更新：2026-02-03  
> 基於專案現況、優化路線圖與用戶需求整理

---

## 一、高優先級功能（核心體驗提升）

### 1.1 歷史記錄 UI 📚

**目標**：讓用戶可以查看、重新下載、編輯過去的生成結果

**功能需求**：
- 歷史記錄側邊欄或獨立頁面
- 顯示縮圖、生成時間、參數資訊
- 支援篩選（依類型、日期）
- 快速操作：下載、編輯、刪除、重新生成
- 搜尋功能（依參數或時間）

**技術實作**：
- 使用現有的 `useHistory` hook
- 新增 `components/HistoryPanel.tsx` 或 `pages/HistoryPage.tsx`
- 整合到 Header 或導覽列

**預估工作量**：2-3 天

---

### 1.2 批量處理 UI 🔄

**目標**：在證件照、形象照頁面支援一次上傳多張並批量生成

**功能需求**：
- 多檔案選擇（一次選擇多張）
- 批量生成進度顯示（整體進度 + 單檔進度）
- 結果網格顯示
- 批量下載（打包成 ZIP）
- 失敗重試機制

**技術實作**：
- 使用現有的 `useBatchProcessing` hook
- 新增 `components/BatchUploadSection.tsx`
- 新增 `components/BatchProgress.tsx`
- 整合到 `IdPhotoPage`、`PortraitPage`

**預估工作量**：3-4 天

---

### 1.3 錯誤重試機制 🔁

**目標**：為失敗的請求提供重試功能

**功能需求**：
- 錯誤顯示時顯示「重試」按鈕
- 自動重試（可選，最多 3 次）
- 重試時保留原始參數
- 重試進度顯示

**技術實作**：
- 在錯誤處理中添加重試邏輯
- 更新 `GenericResult` 或錯誤顯示元件
- 可選：新增 `hooks/useRetry.ts`

**預估工作量**：1-2 天

---

## 二、中優先級功能（功能擴展）

### 2.1 進階編輯功能 🎨

#### 2.1.1 背景移除/替換
**功能**：自動移除背景或替換為指定背景
- 點選「移除背景」自動處理
- 上傳背景圖替換
- 選擇純色背景
- 選擇漸層背景

**技術需求**：擴充 `services/gemini/edit.ts`，新增背景處理 API

**預估工作量**：3-5 天

#### 2.1.2 人像美化
**功能**：自動調整膚色、瘦臉、美白等（需用戶同意）
- 美顏強度調整（0-100%）
- 膚色調整
- 臉型微調
- 眼睛放大
- 牙齒美白

**技術需求**：新增 `services/gemini/beauty.ts`，注意倫理與用戶同意

**預估工作量**：4-6 天

#### 2.1.3 風格遷移
**功能**：將照片轉換為特定藝術風格
- 油畫風格
- 水彩風格
- 素描風格
- 卡通風格
- 復古風格

**技術需求**：擴充 `services/gemini/filter.ts` 或新增 `services/gemini/styleTransfer.ts`

**預估工作量**：3-4 天

#### 2.1.4 物件移除
**功能**：點選畫面物件並移除（進階版修圖）
- 點選物件標記移除區域
- 自動填充背景
- 多物件選擇

**技術需求**：擴充 `services/gemini/edit.ts`，使用物件檢測與修復

**預估工作量**：4-5 天

#### 2.1.5 智慧構圖
**功能**：自動調整構圖、水平線、黃金比例等
- 自動水平校正
- 構圖建議（三分法、對稱等）
- 自動裁切建議
- 主體居中

**技術需求**：新增 `services/gemini/composition.ts` 或整合到 `services/gemini/adjustment.ts`

**預估工作量**：3-4 天

---

### 2.2 照片館 Phase 3 功能 🏪

#### 2.2.1 API 載入方案
**功能**：將方案資料改為從 API 載入
- 保留靜態 fallback
- 載入狀態顯示
- 錯誤處理與重試
- 快取機制

**技術需求**：
- 新增 `services/api/photographyService.ts`
- 更新 `features/photography-service/` 使用 API
- 保留 `constants/photographyService.ts` 作為 fallback

**預估工作量**：2-3 天

#### 2.2.2 精選/作品集區塊
**功能**：實作展示區塊
- 精選方案輪播
- 作品集展示（需後端支援或使用範例圖片）
- 用戶評價（可選）

**技術需求**：更新 `PhotographyServicePage.tsx`，新增展示元件

**預估工作量**：2-3 天

#### 2.2.3 方案搜尋/篩選
**功能**：當方案數量增加時的搜尋與進階篩選
- 關鍵字搜尋
- 價格範圍篩選
- 分類篩選
- 排序（價格、熱門度）

**技術需求**：新增搜尋與篩選 UI，更新 `ServiceList` 元件

**預估工作量**：2-3 天

---

### 2.3 性能優化 ⚡

#### 2.3.1 圖片壓縮
**功能**：上傳前自動壓縮大圖
- 自動檢測檔案大小
- 超過閾值自動壓縮
- 壓縮品質選擇
- 壓縮進度顯示

**技術需求**：
- 新增 `utils/imageCompression.ts`（使用 canvas 或 Web API）
- 整合到所有上傳流程

**預估工作量**：2-3 天

#### 2.3.2 懶加載與虛擬滾動
**功能**：優化長列表性能
- 照片館方案列表虛擬滾動
- 場景地圖懶加載
- 歷史記錄分頁

**技術需求**：使用 `react-window` 或 `react-virtual` 等庫

**預估工作量**：2-3 天

#### 2.3.3 結果快取
**功能**：快取已生成的結果，避免重複 API 呼叫
- 使用相同的輸入參數時直接返回快取
- 快取過期機制（如 24 小時）
- 快取管理 UI（清除快取）

**技術需求**：
- 新增 `utils/cache.ts`
- 整合到生成流程
- 使用 IndexedDB 或 localStorage

**預估工作量**：2-3 天

#### 2.3.4 Code Splitting
**功能**：使用 React.lazy 分割各功能頁面代碼
- 各功能頁面動態載入
- 減少初始載入時間
- Loading fallback

**技術需求**：更新 `App.tsx`，使用 `React.lazy` 和 `Suspense`

**預估工作量**：1-2 天

---

## 三、低優先級功能（長期規劃）

### 3.1 社交與分享功能 📤

#### 3.1.1 結果分享
**功能**：生成分享連結或直接分享到社群媒體
- 生成臨時分享連結（24 小時有效）
- 分享到 Facebook、Twitter、Line
- 分享預覽圖與描述

**技術需求**：
- 後端 API（生成分享連結）
- 或使用前端方案（data URL 轉 base64，使用第三方服務）

**預估工作量**：3-4 天

#### 3.1.2 作品集功能
**功能**：用戶可建立個人作品集
- 建立作品集
- 添加作品（從歷史記錄選擇）
- 作品集分享連結
- 公開/私密設定

**技術需求**：
- 後端 API（用戶系統、作品集 CRUD）
- 前端作品集管理頁面

**預估工作量**：5-7 天

#### 3.1.3 模板市場
**功能**：用戶可上傳/分享自訂主題模板或場景
- 模板上傳
- 模板瀏覽與下載
- 模板評分與評論
- 模板分類

**技術需求**：
- 後端 API（模板管理、用戶系統）
- 前端模板市場頁面

**預估工作量**：7-10 天

---

### 3.2 商業功能 💼

#### 3.2.1 付費方案
**功能**：免費額度 + 付費升級
- 免費額度限制（如每月 10 次生成）
- 付費方案（更多生成次數、高解析度）
- 支付整合（Stripe、綠界等）
- 訂閱管理

**技術需求**：
- 後端 API（用戶系統、訂閱管理、支付整合）
- 前端訂閱頁面與管理

**預估工作量**：10-15 天

#### 3.2.2 API 服務
**功能**：提供 API 供第三方整合
- API 文檔
- API Key 管理
- 使用量追蹤
- 計費系統

**技術需求**：
- 後端 API Gateway
- API 文檔（Swagger/OpenAPI）
- 前端 API 管理頁面

**預估工作量**：15-20 天

#### 3.2.3 白標方案
**功能**：為企業提供客製化品牌版本
- 品牌客製化（Logo、顏色、域名）
- 企業專屬功能
- 批量授權管理

**技術需求**：
- 多租戶架構
- 品牌客製化系統
- 企業管理後台

**預估工作量**：20-30 天

---

### 3.3 數據分析與優化 📊

#### 3.3.1 使用情況追蹤
**功能**：追蹤使用情況、熱門功能、用戶行為
- 功能使用統計
- 錯誤率追蹤
- 用戶流程分析
- 性能監控

**技術需求**：
- 分析工具整合（Google Analytics、Mixpanel 等）
- 或自建分析系統

**預估工作量**：3-5 天

#### 3.3.2 A/B 測試
**功能**：測試不同 UI/UX 設計的效果
- A/B 測試框架
- 實驗管理
- 結果分析

**技術需求**：整合 A/B 測試工具或自建框架

**預估工作量**：5-7 天

---

## 四、技術債務與維護

### 4.1 測試覆蓋 🧪

#### 4.1.1 單元測試
**目標**：為工具函數與服務添加單元測試
- `utils/` 目錄下的函數
- `services/gemini/` 目錄下的服務
- 目標覆蓋率：80%+

**技術需求**：Jest + React Testing Library

**預估工作量**：5-7 天

#### 4.1.2 整合測試
**目標**：為各功能頁面的關鍵流程添加整合測試
- 證件照生成流程
- 形象照生成流程
- 編輯器操作流程

**技術需求**：Jest + React Testing Library

**預估工作量**：5-7 天

#### 4.1.3 E2E 測試
**目標**：使用 Playwright/Cypress 測試主要用戶流程
- 完整生成流程
- 編輯器操作
- 錯誤處理

**技術需求**：Playwright 或 Cypress

**預估工作量**：7-10 天

---

### 4.2 代碼規範 🔍

#### 4.2.1 ESLint 配置
**目標**：建立或完善 ESLint 配置
- React/TypeScript 規則
- 自訂規則
- 自動修復

**預估工作量**：1 天

#### 4.2.2 Prettier 配置
**目標**：統一代碼格式化規則
- Prettier 配置
- 與 ESLint 整合
- Git hooks 自動格式化

**預估工作量**：1 天

#### 4.2.3 TypeScript Strict 模式
**目標**：啟用更嚴格的 TypeScript 檢查
- 修復現有類型錯誤
- 啟用 strict 模式
- 完善類型定義

**預估工作量**：2-3 天

---

### 4.3 文檔完善 📝

#### 4.3.1 README 更新
**目標**：補充新功能說明
- 形象照、主題寫真、雙人/多人寫真功能說明
- 照片館功能說明
- 使用範例

**預估工作量**：1 天

#### 4.3.2 API 文檔
**目標**：為服務添加 JSDoc 註解
- `services/gemini/*.ts` 的函數文檔
- 參數說明
- 使用範例

**預估工作量**：2-3 天

#### 4.3.3 開發指南
**目標**：建立開發指南
- 開發環境設定
- 命名規範
- 提交規範
- 架構說明

**預估工作量**：2-3 天

---

## 五、建議開發順序

### Phase 1：核心體驗提升（1-2 週）
1. ✅ 歷史記錄 UI
2. ✅ 批量處理 UI
3. ✅ 錯誤重試機制

### Phase 2：功能擴展（2-3 週）
4. ✅ 進階編輯功能（背景移除、風格遷移）
5. ✅ 照片館 Phase 3（API 載入、作品集）
6. ✅ 性能優化（圖片壓縮、懶加載）

### Phase 3：技術債務（1-2 週）
7. ✅ 測試覆蓋（單元測試、整合測試）
8. ✅ 代碼規範（ESLint、Prettier、TypeScript strict）
9. ✅ 文檔完善

### Phase 4：長期規劃（依需求）
10. ✅ 社交分享功能
11. ✅ 商業功能（付費方案、API 服務）
12. ✅ 數據分析

---

## 六、優先級建議

### 🔴 立即開發（1 個月內）
- 歷史記錄 UI
- 批量處理 UI
- 錯誤重試機制
- 圖片壓縮
- Code Splitting

### 🟡 近期開發（2-3 個月）
- 進階編輯功能（背景移除、風格遷移）
- 照片館 Phase 3
- 測試覆蓋
- 代碼規範

### 🟢 長期規劃（3-6 個月+）
- 社交分享功能
- 商業功能
- 數據分析
- 白標方案

---

## 七、技術考量

### 7.1 後端需求
以下功能需要後端支援：
- 歷史記錄持久化（目前使用 localStorage，可改為後端）
- 作品集功能
- 模板市場
- 付費方案
- API 服務
- 分享連結生成

**建議**：先完成前端功能，後端可後續補上。

### 7.2 第三方服務整合
- **支付**：Stripe、綠界、PayPal
- **分析**：Google Analytics、Mixpanel
- **分享**：Facebook SDK、Twitter API、Line API
- **儲存**：AWS S3、Cloudinary（如需儲存用戶圖片）

### 7.3 性能考量
- **圖片處理**：考慮使用 Web Workers 處理圖片壓縮
- **API 優化**：實現請求去重、請求佇列
- **快取策略**：Service Worker 實現離線快取

---

## 八、參考資源

- [React Performance Optimization](https://react.dev/learn/render-and-commit)
- [Web Workers API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API)
- [IndexedDB API](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API)
- [Playwright Testing](https://playwright.dev/)
- [Stripe Payment Integration](https://stripe.com/docs/payments)

---

**備註**：此路線圖為建議性質，實際優先順序應依專案需求、資源與市場反饋調整。
